<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Sequel::Plugins::AssociationPks</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>module</span>
          Sequel::Plugins::AssociationPks
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../../files/lib/sequel/plugins/association_pks_rb.html">lib/sequel/plugins/association_pks.rb</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>The association_pks plugin adds association_pks and association_pks=
            instance methods to the model class for each association added.  These
            methods allow for easily returning the primary keys of the associated
            objects, and easily modifying which objects are associated:</p>
            
            <pre class="ruby"><span class="ruby-constant">Artist</span>.<span class="ruby-identifier">one_to_many</span> :<span class="ruby-identifier">albums</span>&#x000A;<span class="ruby-identifier">artist</span> = <span class="ruby-constant">Artist</span>[<span class="ruby-value">1</span>]&#x000A;<span class="ruby-identifier">artist</span>.<span class="ruby-identifier">album_pks</span> <span class="ruby-comment"># [1, 2, 3]</span>&#x000A;<span class="ruby-identifier">artist</span>.<span class="ruby-identifier">album_pks</span> = [<span class="ruby-value">2</span>, <span class="ruby-value">4</span>]&#x000A;<span class="ruby-identifier">artist</span>.<span class="ruby-identifier">album_pks</span> <span class="ruby-comment"># [2, 4]</span></pre>
            
            <p>Note that it uses the singular form of the association name. Also note that
            the setter both associates to new primary keys not in the assocation and
            disassociates from primary keys not provided to the method.</p>
            
            <p>This plugin makes modifications directly to the underlying tables, it does
            not create or return any model objects, and therefore does not call any
            callbacks.  If you have any association callbacks, you probably should not
            use the setter methods.</p>
            
            <p>If an association uses the :delay_pks option, you can set the associated
            pks for new objects, and the setting will not be persisted until after the
            object has been created in the database.  Additionally, if an association
            uses the :delay_pks=&gt;:all option, you can set the associated pks for
            existing objects, and the setting will not be persisted until after the
            object has been saved.</p>
            
            <p>Usage:</p>
            
            <pre class="ruby"><span class="ruby-comment"># Make all model subclass *_to_many associations have association_pks</span>&#x000A;<span class="ruby-comment"># methods (called before loading subclasses)</span>&#x000A;<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>.<span class="ruby-identifier">plugin</span> :<span class="ruby-identifier">association_pks</span>&#x000A;&#x000A;<span class="ruby-comment"># Make the Album *_to_many associations have association_pks</span>&#x000A;<span class="ruby-comment"># methods (called before the association methods)</span>&#x000A;<span class="ruby-constant">Album</span>.<span class="ruby-identifier">plugin</span> :<span class="ruby-identifier">association_pks</span></pre>
          </div>
          <div id='context'>
          </div>
          <div id='class-list'>
            <h2>Classes and Modules</h2>
            <ol>
              <li><a target="docwin" href="AssociationPks/ClassMethods.html">Sequel::Plugins::AssociationPks::ClassMethods</a></li>
              <li><a target="docwin" href="AssociationPks/InstanceMethods.html">Sequel::Plugins::AssociationPks::InstanceMethods</a></li>
            </ol>
          </div>
          <div id='section'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
